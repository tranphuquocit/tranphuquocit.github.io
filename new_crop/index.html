<!doctype html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cắt hình ảnh</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="app">
    <div class="editor-wrap">
      <div class="editor" id="editor">
        <div class="canvas-stage" id="stage">
          <canvas id="displayCanvas"></canvas>

          <!-- overlay parts (top/left/right/bottom) to dim outside area -->
          <div id="overlayTop" class="overlay-part"></div>
          <div id="overlayLeft" class="overlay-part"></div>
          <div id="overlayRight" class="overlay-part"></div>
          <div id="overlayBottom" class="overlay-part"></div>

          <!-- Crop box -->
          <div id="cropBox" class="crop-box">
            <div class="grid">
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
            </div>
            <!-- 8 handle -->
            <div class="handle tl" data-handle="tl"></div>
            <div class="handle tr" data-handle="tr"></div>
            <div class="handle bl" data-handle="bl"></div>
            <div class="handle br" data-handle="br"></div>
            <div class="handle t" data-handle="t"></div>
            <div class="handle b" data-handle="b"></div>
            <div class="handle l" data-handle="l"></div>
            <div class="handle r" data-handle="r"></div>
            <div id="boxLabel"
              style="position:absolute; left:8px; bottom:6px; pointer-events:none; font-size:12px; color:var(--blue); background:rgba(255,255,255,0.06); padding:2px 6px; border-radius:4px;">
            </div>
          </div>

          <!-- Choose file -->
          <div class="choose-wrapper" id="chooseWrapper">
            <label class="btn" id="chooseBtn">Chọn Ảnh</label>
            <input id="fileInput" type="file" accept="image/*" style="display:none" />
          </div>
        </div>
      </div>
    </div>

    <div class="panel" id="panel">
      <h3>Tùy chọn Cắt Ảnh</h3>
      <div class="muted" id="origSize">Kích thước gốc: —</div>

      <div class="form-row">
        <label>Chiều rộng (px)</label>
        <input id="inputW" type="number" min="1" />
      </div>
      <div class="form-row">
        <label>Chiều cao (px)</label>
        <input id="inputH" type="number" min="1" />
      </div>
      <div class="form-row">
        <label>Vị trí X (px)</label>
        <input id="inputX" type="number" min="0" />
      </div>
      <div class="form-row">
        <label>Vị trí Y (px)</label>
        <input id="inputY" type="number" min="0" />
      </div>

      <div class="action-row">
        <button id="cropBtn" class="btn-block">Cắt Ảnh</button>
      </div>

      <div class="preview">
        <h4 style="margin:10px 0 6px 0">Ảnh đã cắt:</h4>
        <div class="thumb" id="previewThumb"></div>
      </div>

      <div class="action-row">
        <button id="downloadBtn" class="btn-block btn-download" disabled>Tải xuống ảnh</button>
      </div>

      <div class="small-actions" style="margin-top:12px; display:flex; gap:8px;">
        <button id="resetBtn" class="btn secondary" style="flex:1">Đặt lại</button>
        <button id="clearBtn" class="btn secondary" style="flex:1">Xóa ảnh</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>